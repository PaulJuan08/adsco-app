/* ============================================================
   TOPIC SHOW  —  topic-show.css
   Supports: PDF modal + Video modal (YouTube/Vimeo/Drive/native)
   Version: 3.0  (attachment-free, clean)
   ============================================================ */

/* ──────────────────────────────────────────────────────────────
   1. FORM CONTAINER
   ────────────────────────────────────────────────────────────── */
.form-container {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--border);
    overflow: hidden;
    transition: box-shadow var(--transition-slow), transform var(--transition-slow);
    max-width: 1200px;
    width: 95%;
    margin: var(--space-6) auto;
}
.form-container:hover {
    box-shadow: var(--shadow-xl);
    transform: translateY(-2px);
}

/* ──────────────────────────────────────────────────────────────
   2. CARD HEADER
   ────────────────────────────────────────────────────────────── */
.card-header {
    padding: var(--space-5) var(--space-6);
    border-bottom: 1px solid var(--border);
    background: linear-gradient(135deg, #552b20 0%, #8a6603 100%);
    color: var(--white);
    position: relative;
    overflow: hidden;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.card-header::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,.1) 50%, transparent 70%);
    animation: shimmer 3s infinite;
}
@keyframes shimmer {
    0%   { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}
.card-title-group {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    position: relative;
    z-index: 1;
}
.card-icon {
    width: 42px; height: 42px;
    background: rgba(255,255,255,.2);
    backdrop-filter: blur(10px);
    border-radius: var(--radius);
    display: flex; align-items: center; justify-content: center;
    color: var(--white);
    font-size: var(--font-size-lg);
    border: 1px solid rgba(255,255,255,.3);
}
.card-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-bold);
    color: var(--white);
    margin: 0;
    text-shadow: 0 2px 4px rgba(0,0,0,.1);
}

/* ──────────────────────────────────────────────────────────────
   3. TOP ACTION BUTTONS
   ────────────────────────────────────────────────────────────── */
.top-actions {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    position: relative;
    z-index: 1;
}
.top-action-btn {
    color: var(--white);
    font-size: var(--font-size-sm);
    font-weight: var(--font-semibold);
    text-decoration: none;
    display: flex; align-items: center; gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    background: rgba(255,255,255,.15);
    border-radius: var(--radius);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,.2);
    transition: all var(--transition-base);
    cursor: pointer;
}
.top-action-btn:hover {
    background: rgba(255,255,255,.25);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}
.top-action-btn.delete-btn       { background: rgba(239,68,68,.3); }
.top-action-btn.delete-btn:hover { background: rgba(239,68,68,.5); }

/* ──────────────────────────────────────────────────────────────
   4. CARD BODY
   ────────────────────────────────────────────────────────────── */
.card-body { padding: var(--space-6); background: var(--white); }

/* ──────────────────────────────────────────────────────────────
   5. TOPIC PREVIEW
   ────────────────────────────────────────────────────────────── */
.topic-preview {
    background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
    border-radius: var(--radius-lg);
    padding: var(--space-6);
    margin-bottom: var(--space-5);
    border: 1px solid var(--border);
    text-align: center;
}
.topic-preview-avatar {
    width: 90px; height: 90px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: var(--white);
    display: flex; align-items: center; justify-content: center;
    font-size: 2.5rem; font-weight: var(--font-bold);
    margin: 0 auto var(--space-4);
    border: 4px solid var(--white);
    box-shadow: var(--shadow-lg);
}
.topic-preview-title {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-extrabold);
    color: var(--gray-900);
    margin-bottom: var(--space-2);
    letter-spacing: -.5px;
}
.topic-preview-meta {
    display: flex; justify-content: center;
    gap: var(--space-3); flex-wrap: wrap;
    margin-bottom: var(--space-3);
}
.topic-preview-badge {
    display: inline-flex; align-items: center; gap: var(--space-2);
    padding: var(--space-2) var(--space-5);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs); font-weight: var(--font-semibold);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,.2);
    transition: all var(--transition-base);
}
.topic-preview-badge.published {
    background: linear-gradient(135deg, var(--success) 0%, var(--success-dark) 100%);
    color: var(--white);
    box-shadow: 0 4px 12px rgba(72,187,120,.3);
}
.topic-preview-badge.draft {
    background: linear-gradient(135deg, var(--warning) 0%, var(--warning-dark) 100%);
    color: var(--white);
    box-shadow: 0 4px 12px rgba(237,137,54,.3);
}
.topic-preview-id {
    font-size: var(--font-size-sm); color: var(--gray-600);
    background: rgba(255,255,255,.8);
    padding: var(--space-1) var(--space-4);
    border-radius: var(--radius-full);
    display: inline-block;
}

/* ──────────────────────────────────────────────────────────────
   6. TWO-COLUMN LAYOUT
   ────────────────────────────────────────────────────────────── */
.two-column-layout {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: var(--space-6);
    align-items: start;
}
.form-column, .sidebar-column { min-width: 0; }

/* ──────────────────────────────────────────────────────────────
   7. DETAIL SECTIONS
   ────────────────────────────────────────────────────────────── */
.detail-section {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: var(--space-5);
    margin-bottom: var(--space-5);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
    transition: box-shadow var(--transition-base);
    position: relative;
    overflow: hidden;
}
.detail-section:hover { box-shadow: var(--shadow-md); }
.detail-section::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: 3px 3px 0 0;
}
.detail-section-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-bold);
    color: var(--gray-800);
    margin-bottom: var(--space-4);
    display: flex; align-items: center; gap: var(--space-2);
    padding-bottom: var(--space-3);
    border-bottom: 2px solid var(--gray-100);
}
.detail-section-title i {
    color: var(--primary);
    font-size: var(--font-size-lg);
    width: 20px; text-align: center;
}

/* ──────────────────────────────────────────────────────────────
   8. INFO ROWS
   ────────────────────────────────────────────────────────────── */
.info-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: var(--space-2) var(--space-3);
    background: var(--gray-50);
    border-radius: var(--radius);
    margin-bottom: var(--space-2);
}
.info-label {
    font-size: var(--font-size-xs); color: var(--gray-600);
    font-weight: var(--font-medium);
    display: flex; align-items: center; gap: var(--space-1);
}
.info-value {
    font-size: var(--font-size-sm); font-weight: var(--font-semibold); color: var(--gray-800);
}
.info-subvalue {
    font-size: var(--font-size-xs); color: var(--gray-500); margin-top: var(--space-1);
}
.pdf-disk-badge {
    font-size: .75rem;
    background: rgba(102,126,234,.1);
    color: var(--primary);
    padding: .15rem .6rem;
    border-radius: var(--radius-full);
    border: 1px solid rgba(102,126,234,.25);
    font-family: monospace;
}

/* ──────────────────────────────────────────────────────────────
   9. DESCRIPTION BOX
   ────────────────────────────────────────────────────────────── */
.description-box {
    padding: var(--space-4) var(--space-5);
    background: var(--white);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    font-size: var(--font-size-sm);
    line-height: 1.6;
    color: var(--gray-700);
}

/* ──────────────────────────────────────────────────────────────
   10. RESOURCE CARDS
   ────────────────────────────────────────────────────────────── */
.resource-card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}
.resource-card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
    border-color: var(--gray-400);
}
.resource-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--border);
    background: var(--gray-50);
    gap: var(--space-3);
}
.resource-meta    { display: flex; align-items: center; gap: 1rem; }
.resource-actions { display: flex; gap: .5rem; flex-shrink: 0; flex-wrap: wrap; }
.resource-content { padding: var(--space-4) var(--space-5); }
.resource-title {
    font-weight: var(--font-bold); color: var(--gray-800);
    font-size: var(--font-size-base); margin-bottom: var(--space-1);
}
.resource-subtitle   { font-size: .75rem; color: #718096; }
.resource-description { color: var(--gray-600); font-size: var(--font-size-xs); line-height: 1.6; }
.resource-description code {
    font-family: monospace; font-size: .8125rem;
    background: var(--gray-100); padding: .1rem .4rem;
    border-radius: 4px; color: var(--primary);
}
.url-box {
    word-break: break-all; font-family: monospace; font-size: .8125rem;
    background: #f8fafc; padding: .625rem;
    border-radius: 8px; border: 1px solid #e2e8f0;
}

/* ──────────────────────────────────────────────────────────────
   11. FILE ICONS (PDF + Video only)
   ────────────────────────────────────────────────────────────── */
.file-icon {
    width: 48px; height: 48px;
    border-radius: var(--radius);
    display: flex; align-items: center; justify-content: center;
    font-size: 1.5rem; flex-shrink: 0;
}
.file-pdf   { background: rgba(239,68,68,.1); color: var(--danger); }
.file-video { background: rgba(239,68,68,.1); color: var(--danger); }

/* ──────────────────────────────────────────────────────────────
   12. RESOURCE ACTION BUTTONS
   ────────────────────────────────────────────────────────────── */
.resource-action-btn {
    display: inline-flex; align-items: center; gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius);
    font-weight: var(--font-semibold); font-size: var(--font-size-xs);
    text-decoration: none; cursor: pointer;
    transition: all var(--transition-base);
    border: none; white-space: nowrap;
}
.resource-action-btn.primary {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: var(--white);
    box-shadow: 0 4px 12px rgba(102,126,234,.3);
}
.resource-action-btn.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(102,126,234,.4);
}
.resource-action-btn.secondary {
    background: var(--white); color: var(--gray-700);
    border: 1.5px solid var(--border);
}
.resource-action-btn.secondary:hover {
    background: var(--gray-50); border-color: var(--gray-500);
    transform: translateY(-2px);
}

/* ──────────────────────────────────────────────────────────────
   13. COURSE TAGS
   ────────────────────────────────────────────────────────────── */
.course-tag {
    display: inline-block;
    background: rgba(102,126,234,.1); color: var(--primary);
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs); font-weight: var(--font-semibold);
    margin-right: var(--space-2); margin-top: var(--space-1);
    border: 1px solid rgba(102,126,234,.2);
    text-decoration: none; transition: all var(--transition-fast);
}
.course-tag:hover { background: var(--primary); color: var(--white); border-color: var(--primary); }

/* ──────────────────────────────────────────────────────────────
   14. EMPTY STATE
   ────────────────────────────────────────────────────────────── */
.empty-state { text-align: center; padding: var(--space-8) var(--space-4); color: var(--gray-500); }
.empty-state i  { font-size: 2.5rem; color: var(--gray-400); margin-bottom: var(--space-3); }
.empty-state h3 { font-size: var(--font-size-base); font-weight: var(--font-semibold); color: var(--gray-600); margin-bottom: var(--space-1); }
.empty-state p  { font-size: var(--font-size-xs); color: var(--gray-500); }

/* ──────────────────────────────────────────────────────────────
   15. ALERTS
   ────────────────────────────────────────────────────────────── */
.alert {
    padding: var(--space-4) var(--space-5);
    border-radius: var(--radius); font-size: var(--font-size-xs);
    display: flex; align-items: flex-start; gap: var(--space-3);
    margin-bottom: var(--space-5); border-left: 4px solid;
    animation: slideIn .3s ease;
}
.alert i { font-size: var(--font-size-base); flex-shrink: 0; margin-top: var(--space-1); }
.alert-success {
    background: linear-gradient(135deg, var(--success-light) 0%, #c6f6d5 100%);
    color: var(--success-dark); border-left-color: var(--success);
}
.alert-error {
    background: linear-gradient(135deg, var(--danger-light) 0%, #fed7d7 100%);
    color: var(--danger-dark); border-left-color: var(--danger);
}
@keyframes slideIn {
    from { opacity: 0; transform: translateY(-10px); }
    to   { opacity: 1; transform: translateY(0); }
}

/* ──────────────────────────────────────────────────────────────
   16. PUBLISH BUTTON
   ────────────────────────────────────────────────────────────── */
.publish-section { margin-top: var(--space-6); text-align: center; }
.publish-btn {
    display: inline-flex; align-items: center; justify-content: center;
    gap: var(--space-2); padding: var(--space-3) var(--space-8);
    border-radius: var(--radius);
    font-weight: var(--font-semibold); font-size: var(--font-size-sm);
    cursor: pointer; border: none;
    background: linear-gradient(135deg, var(--success) 0%, var(--success-dark) 100%);
    color: var(--white); box-shadow: 0 4px 12px rgba(72,187,120,.3);
    transition: all var(--transition-base);
}
.publish-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(72,187,120,.4); }

/* ══════════════════════════════════════════════════════════════
   17. MODAL SYSTEM  —  PDF + VIDEO + GOOGLE DRIVE only
   ══════════════════════════════════════════════════════════════ */

.modal-overlay {
    display: none;
    position: fixed; inset: 0;
    background: rgba(0,0,0,.88);
    z-index: 9999;
    align-items: center; justify-content: center;
    padding: 1rem;
    backdrop-filter: blur(3px);
    animation: fadeIn .2s ease;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.modal-box {
    border-radius: 16px; overflow: hidden;
    display: flex; flex-direction: column;
    box-shadow: 0 32px 80px rgba(0,0,0,.5);
    animation: modalSlideUp .25s ease;
    width: 92%; max-width: 1100px; max-height: 92vh;
}
@keyframes modalSlideUp {
    from { opacity: 0; transform: translateY(24px); }
    to   { opacity: 1; transform: translateY(0); }
}

/* Size variants */
.modal-box--pdf   { height: 88vh; background: #fff; }
.modal-box--video { background: #000; }
.modal-box--drive { background: #000; }

/* Header */
.modal-header {
    padding: 1rem 1.5rem;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: #fff;
    display: flex; align-items: center; justify-content: space-between;
    flex-shrink: 0; gap: 1rem;
}
.modal-header__title {
    font-weight: 600; font-size: .9375rem;
    display: flex; align-items: center; gap: .5rem; min-width: 0;
}
.modal-header--pdf   { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); }
.modal-header--video { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); }

/* Close button */
.modal-close {
    background: rgba(255,255,255,.2);
    border: 1px solid rgba(255,255,255,.3);
    color: #fff; font-size: 1.375rem; line-height: 1;
    cursor: pointer; width: 34px; height: 34px;
    display: flex; align-items: center; justify-content: center;
    border-radius: 8px; transition: all .2s; flex-shrink: 0;
}
.modal-close:hover { background: rgba(255,255,255,.35); transform: rotate(90deg); }

/* Body */
.modal-body { flex: 1; position: relative; overflow: hidden; }
.modal-body--iframe { background: #f8fafc; }
.modal-body--iframe .modal-iframe {
    width: 100%; height: 100%; border: none; display: block; transition: opacity .3s;
}
.modal-body--dark { background: #000; }
.modal-body--dark .modal-iframe { background: #000; }
.modal-body--video { background: #000; }

/* Footer */
.modal-footer { flex-shrink: 0; }
.modal-footer--dark {
    padding: .75rem 1.5rem;
    background: #0f172a; color: rgba(255,255,255,.7);
    font-size: .75rem; font-family: monospace;
    word-break: break-all; border-top: 1px solid rgba(255,255,255,.06);
}

/* Loading spinner */
.modal-loading {
    position: absolute; inset: 0;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    background: inherit; z-index: 5; gap: 1rem;
}
.modal-loading p { color: #4a5568; font-size: .875rem; }
.spinner {
    width: 44px; height: 44px;
    border: 4px solid #e2e8f0;
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}
.spinner--light { border-color: rgba(255,255,255,.25); border-top-color: var(--primary); }
@keyframes spin { to { transform: rotate(360deg); } }

/* Video loading */
.video-dark-loading { background: #000 !important; }
.video-dark-loading p { color: rgba(255,255,255,.7); }

/* 16:9 embed wrapper (YouTube / Vimeo) */
.video-ratio-box {
    position: relative; width: 100%; padding-bottom: 56.25%;
}
.video-ratio-iframe {
    position: absolute; inset: 0;
    width: 100%; height: 100%; border: none; transition: opacity .3s;
}
.video-ratio-box .modal-loading { background: #000; }

/* Native <video> panel */
.native-video-wrap {
    width: 100%; height: 100%; min-height: 300px;
    display: flex; align-items: center; justify-content: center;
    background: #000; position: relative; flex-direction: column;
}
.native-video-player {
    width: 100%; max-height: 75vh; display: block; background: #000; outline: none;
}

/* Video error state */
.video-error-state {
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    gap: .75rem; padding: 3rem 2rem;
    text-align: center; color: rgba(255,255,255,.85);
}
.video-error-state i { font-size: 3rem; color: #f59e0b; }
.video-error-state p { font-size: .9375rem; margin: 0; }
.video-error-hint    { font-size: .8125rem !important; color: rgba(255,255,255,.5) !important; }

/* ══════════════════════════════════════════════════════════════
   18. RESPONSIVE
   ══════════════════════════════════════════════════════════════ */
@media (max-width: 992px) {
    .two-column-layout { grid-template-columns: 1fr; gap: var(--space-4); }
}
@media (max-width: 768px) {
    .form-container { width: 100%; margin: var(--space-3) auto; border-radius: var(--radius); }
    .card-header { padding: var(--space-4); flex-direction: column; gap: var(--space-3); align-items: flex-start; }
    .top-actions { align-self: stretch; justify-content: flex-start; flex-wrap: wrap; }
    .top-action-btn { flex: 1; justify-content: center; }
    .card-body { padding: var(--space-4); }
    .detail-section { padding: var(--space-4); }
    .resource-header { flex-direction: column; align-items: flex-start; }
    .resource-actions { width: 100%; }
    .resource-action-btn { flex: 1; justify-content: center; }
    .topic-preview-avatar { width: 70px; height: 70px; font-size: 2rem; }
    .topic-preview-title  { font-size: var(--font-size-xl); }
    .modal-box { width: 96%; max-height: 95vh; }
}
@media (max-width: 576px) {
    .form-container { margin: var(--space-2) auto; border-radius: var(--radius-sm); }
    .card-header, .card-body { padding: var(--space-3); }
    .card-title { font-size: var(--font-size-lg); }
    .card-icon  { width: 36px; height: 36px; font-size: var(--font-size-base); }
    .detail-section { padding: var(--space-3); }
    .detail-section-title { font-size: var(--font-size-sm); margin-bottom: var(--space-3); }
    .topic-preview { padding: var(--space-4); }
    .topic-preview-avatar { width: 60px; height: 60px; font-size: 1.75rem; }
    .topic-preview-title  { font-size: var(--font-size-lg); }
    .topic-preview-meta   { flex-direction: column; align-items: center; }
    .info-row { flex-direction: column; align-items: flex-start; gap: var(--space-1); }
    .modal-header { padding: .75rem 1rem; }
    .modal-header__title { font-size: .875rem; }
    .modal-box { border-radius: 12px; }
}

/* ══════════════════════════════════════════════════════════════
   19. PRINT
   ══════════════════════════════════════════════════════════════ */
@media print {
    .top-actions, .publish-section, .resource-actions,
    .modal-overlay { display: none !important; }
    .form-container { box-shadow: none; border: 1px solid #000; margin: 0; width: 100%; }
    .card-header {
        background: #f3f4f6 !important; color: #000 !important;
        -webkit-print-color-adjust: exact; print-color-adjust: exact;
    }
    .card-header::before { display: none; }
    .detail-section, .resource-card { break-inside: avoid; box-shadow: none; border: 1px solid #ddd; }
}